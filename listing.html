<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Detailed listing for luxury apartments and homes with HomeFinder in Nigeria.">
  <meta name="keywords" content="Homes, apartments, rentals, luxury homes, real estate, Nigeria">
  <meta name="robots" content="index, follow">
  <title>HomeFinder - Property Listing</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <!-- Font Awesome CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <!-- Google Fonts: Roboto -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">
  <!-- AOS CSS -->
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
  <link rel="stylesheet" href="style.css">
  <!-- Google Maps API -->
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap"></script>
</head>

<body>
  <!-- Header -->
  <header class="header" data-aos="fade-down">
    <div class="header-container">
      <nav class="navbar">
        <a class="navbar-brand" href="index.html">
          <img src="assets/logo.png" alt="HomeFinder Logo" class="navbar-logo" loading="lazy">
          HomeFinder
        </a>
        <ul class="navbar-nav d-none d-md-flex">
          <li class="nav-item">
            <a class="nav-link active" href="index.html" aria-current="page" title="Browse apartments for lease"><i
                class="fas fa-building"></i> Apartments</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="home.html" title="Browse homes for sale"><i class="fas fa-home"></i> Homes for
              Sale</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="land.html" title="Browse lands for sale"><i class="fas fa-map"></i> Lands for
              Sale</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="inbox.html" aria-label="Messages" title="View your messages"><i
                class="fas fa-envelope profile-icon"></i></a>
          </li>
          <li class="nav-item">
            <a class="nav-link profile-icon" href="#" aria-label="User Profile" title="Your profile"><i
                class="fas fa-user"></i></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" title="List your property">Become a Host</a>
          </li>
          <li class="nav-item">
            <button class="theme-toggle" id="themeToggle" title="Toggle dark/light theme"><i
                class="fas fa-moon"></i></button>
          </li>
        </ul>
        <button class="navbar-toggler d-md-none" type="button" data-bs-toggle="offcanvas"
          data-bs-target="#navbarOffcanvas" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="offcanvas offcanvas-start" tabindex="-1" id="navbarOffcanvas"
          aria-labelledby="navbarOffcanvasLabel">
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="navbarOffcanvasLabel">Menu</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
          </div>
          <div class="offcanvas-body">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" href="index.html" aria-current="page" title="Browse apartments for lease"><i
                    class="fas fa-building"></i> Apartments</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="home.html" title="Browse homes for sale"><i class="fas fa-home"></i> Homes for
                  Sale</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="land.html" title="Browse lands for sale"><i class="fas fa-map"></i> Lands for
                  Sale</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="inbox.html" title="View your messages"><i class="fas fa-envelope"></i>
                  Messages</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" title="List your property"><i class="fas fa-plus-circle"></i> Become a
                  Host</a>
              </li>
              <li class="nav-item">
                <button class="nav-link" id="search-button" title="Search properties"><i class="fas fa-search"></i>
                  Search</button>
              </li>
              <li class="nav-item">
                <button class="nav-link theme-toggle" id="themeToggleMobile" title="Toggle dark/light theme"><i
                    class="fas fa-moon"></i>Theme</button>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <div class="search-card d-md-block d-none" data-aos="fade-up" data-aos-delay="200">
        <button class="btn-close d-md-none" id="search-close" aria-label="Close Search"></button>
        <div class="search-form" id="search-form" aria-label="Search Properties">
          <div class="input-group">
            <span class="input-group-text" id="location-addon"><i class="fas fa-map-marker-alt"></i></span>
            <input type="text" class="form-control" placeholder="Location" aria-label="Location" list="locations"
              aria-describedby="location-addon">
            <datalist id="locations">
              <option value="Lagos">
              <option value="Abuja">
              <option value="Rivers">
              <option value="Kano">
              <option value="Oyo">
              <option value="Ekiti">
            </datalist>
          </div>
          <div class="input-group">
            <span class="input-group-text" id="min-price-addon"><i class="fas fa-money-bill-wave"></i></span>
            <input type="number" class="form-control" placeholder="Min Price" aria-label="Minimum Price"
              aria-describedby="min-price-addon">
          </div>
          <div class="input-group">
            <span class="input-group-text" id="max-price-addon"><i class="fas fa-money-bill-wave"></i></span>
            <input type="number" class="form-control" placeholder="Max Price" aria-label="Maximum Price"
              aria-describedby="max-price-addon">
          </div>
          <div class="input-group">
            <span class="input-group-text" id="amenities-addon"><i class="fas fa-concierge-bell"></i></span>
            <select class="form-select" aria-label="Amenities" aria-describedby="amenities-addon">
              <option selected>Amenities</option>
              <option value="pool">Pool</option>
              <option value="gym">Gym</option>
              <option value="pet">Pet-Friendly</option>
              <option value="smart">Smart Home</option>
            </select>
          </div>
          <button type="button" class="btn btn-primary" aria-label="Search Properties"><i class="fas fa-search"></i>
            Search</button>
        </div>
      </div>
    </div>
  </header>

  <!-- Listing Page Content -->
  <section class="listing-page py-5" data-aos="fade-up">
    <div class="container">
      <!-- Image Section -->
      <section class="property-images mb-4" data-aos="fade-up">
        <div class="image-grid" id="imageGrid">
          <div class="image-main">
            <img src="https://placehold.co/400x300/d4af37/001f3f?text=Living+Room&font=roboto" alt="Living Room"
              loading="lazy">
          </div>
          <div class="image-sub1">
            <img src="https://placehold.co/400x300/b8860b/001f3f?text=Bedroom&font=roboto" alt="Bedroom" loading="lazy">
          </div>
          <div class="image-sub2">
            <img src="https://placehold.co/400x300/d4af37/001f3f?text=Kitchen&font=roboto" alt="Kitchen" loading="lazy">
          </div>
          <div class="image-sub3">
            <img src="https://placehold.co/400x300/b8860b/001f3f?text=Bathroom&font=roboto" alt="Bathroom"
              loading="lazy">
          </div>
          <div class="image-sub4">
            <img src="https://placehold.co/400x300/d4af37/001f3f?text=View&font=roboto" alt="View" loading="lazy">
          </div>
        </div>
        <div class="image-carousel carousel slide" id="imageCarousel" data-bs-ride="carousel">
          <div class="carousel-inner" id="carouselInner"></div>
          <div class="carousel-indicators" id="carouselIndicators"></div>
        </div>
        <div class="text-center mt-5">
          <a href="#" class="show-more-btn" id="showMorePhotos" aria-label="View all photos"><i
              class="fas fa-images"></i> Show More</a>
        </div>
      </section>

      <!-- Main Content and Booking Sidebar -->
      <div class="row">
        <div class="main-content col-lg-8 col-md-12">
          <!-- Listing Info -->
          <div class="listing-info">
            <h1 class="listing-title" id="listingTitle"></h1>
            <p class="listing-location" id="listingLocation"></p>
            <p class="listing-specs" id="listingSpecs"></p>
            <div class="listing-rating" id="listingRating"></div>
          </div>

          <!-- Description -->
          <section class="description mt-5">
            <h2>About this home</h2>
            <p id="listingDescription"></p>
          </section>

          <!-- Amenities -->
          <section class="amenities mt-5">
            <h2>Amenities</h2>
            <div class="amenities-grid" id="amenitiesList"></div>
          </section>

          <!-- Meet Your Host -->
          <section class="host-info mt-5" data-aos="fade-up">
            <h2>Meet Your Host</h2>
            <div class="host-card">
              <div class="d-flex align-items-center gap-3">
                <img id="hostImage" src="" alt="Host" loading="lazy">
                <div>
                  <h5 id="hostName" class="mb-0"></h5>
                  <span id="hostStatus" class="superhost-badge d-none">Superhost</span>
                  <p id="hostJoined" class="text-muted mb-0"></p>
                </div>
              </div>
              <div class="host-stats">
                <div class="host-stat"><i class="fas fa-star"></i> <span id="hostReviews"></span></div>
                <div class="host-stat"><i class="fas fa-check-circle"></i> Identity verified</div>
                <div class="host-stat"><i class="fas fa-comment"></i> <span id="hostResponseRate"></span></div>
                <div class="host-stat"><i class="fas fa-clock"></i> <span id="hostResponseTime"></span></div>
              </div>
              <p id="hostBio" class="host-bio"></p>
              <a href="#" class="show-more-link" id="showMoreBio">Show more</a>
              <div class="message-host">
                <button class="btn btn-primary" id="contactHost"><i class="fas fa-paper-plane"></i> Contact
                  Host</button>
              </div>
            </div>
          </section>

          <!-- Location -->
          <section class="location mt-5">
            <h2>Location</h2>
            <p id="neighborhoodInfo"></p>
            <div class="map-container" id="map"></div>
            <a href="#" id="viewOnGoogleMaps" class="show-more-btn mt-2" target="_blank"
              aria-label="View on Google Maps"><i class="fas fa-map"></i> View on Google Maps</a>
          </section>

          <!-- Reviews -->
          <section class="reviews mt-5">
            <h2>Reviews</h2>
            <div id="reviewsList"></div>
          </section>

          <!-- Things to Know -->
          <section class="things-to-know mt-5" data-aos="fade-up">
            <h2>Things to Know</h2>
            <div class="things-grid">
              <div class="things-item">
                <h3>House Rules</h3>
                <ul id="houseRules"></ul>
                <a href="#" class="show-more-link" id="showMoreRules">Show more</a>
              </div>
              <div class="things-item">
                <h3>Safety & Property</h3>
                <ul id="safetyInfo"></ul>
                <a href="#" class="show-more-link" id="showMoreSafety">Show more</a>
              </div>
              <div class="things-item">
                <h3>Cancellation Policy</h3>
                <ul id="cancellationPolicy"></ul>
                <a href="#" class="show-more-link" id="showMorePolicy">Show more</a>
              </div>
            </div>
          </section>

          <!-- Similar Properties by Host -->
          <section class="similar-properties mt-5" data-aos="fade-up">
            <h2>More Properties by This Host</h2>
            <div class="row g-4" id="similarProperties">
              <div class="col-lg-4 col-md-6 col-sm-12">
                <div class="home-card" data-aos="fade-up" data-aos-delay="100">
                  <div class="ratio ratio-4x3">
                    <img src="https://placehold.co/400x300/d4af37/001f3f?text=Apt+1&font=roboto" class="card-img-top"
                      alt="Modern Apartment in Ikoyi" loading="lazy">
                  </div>
                  <div class="home-card-body">
                    <h5 class="home-card-title">Modern Apartment in Ikoyi</h5>
                    <p class="home-card-text">Lagos, Nigeria</p>
                    <p class="home-card-price">$1200/month</p>
                    <div class="home-card-rating"><i class="fas fa-star"></i> 4.7 (95 reviews)</div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-6 col-sm-12">
                <div class="home-card" data-aos="fade-up" data-aos-delay="200">
                  <div class="ratio ratio-4x3">
                    <img src="https://placehold.co/400x300/b8860b/001f3f?text=Apt+2&font=roboto" class="card-img-top"
                      alt="Luxury Condo in Banana Island" loading="lazy">
                  </div>
                  <div class="home-card-body">
                    <h5 class="home-card-title">Luxury Condo in Banana Island</h5>
                    <p class="home-card-text">Lagos, Nigeria</p>
                    <p class="home-card-price">$2000/month</p>
                    <div class="home-card-rating"><i class="fas fa-star"></i> 4.9 (55 reviews)</div>
                  </div>
                </div>
              </div>
              <div class="col-lg-4 col-md-6 col-sm-12">
                <div class="home-card" data-aos="fade-up" data-aos-delay="300">
                  <div class="ratio ratio-4x3">
                    <img src="https://placehold.co/400x300/d4af37/001f3f?text=Apt+3&font=roboto" class="card-img-top"
                      alt="Spacious Loft in Lekki" loading="lazy">
                  </div>
                  <div class="home-card-body">
                    <h5 class="home-card-title">Spacious Loft in Lekki</h5>
                    <p class="home-card-text">Lagos, Nigeria</p>
                    <p class="home-card-price">$1500/month</p>
                    <div class="home-card-rating"><i class="fas fa-star"></i> 4.6 (80 reviews)</div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <!-- Booking Panel -->
        <div class="col-lg-4 col-md-12">
          <section class="booking-panel sticky">
            <h3 id="pricePerMonth"></h3>
            <div class="calendar-placeholder">Interactive Calendar Placeholder</div>
            <p class="mt-3"><strong>Total Cost:</strong> <span id="totalCost"></span></p>
            <button class="btn btn-primary w-100 mt-3" id="bookNow"><i class="fas fa-book"></i> Book Now</button>
          </section>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer" data-aos="fade-up">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-4 col-md-6 footer-column">
          <h5 class="footer-title">About HomeFinder</h5>
          <p class="footer-text">We specialize in connecting you with elegant homes and land tailored to your lifestyle.
          </p>
          <div class="social-links">
            <a href="#" class="social-icon facebook" aria-label="Follow us on Facebook"><i
                class="fab fa-facebook-f"></i></a>
            <a href="#" class="social-icon twitter" aria-label="Follow us on Twitter"><i class="fab fa-twitter"></i></a>
            <a href="#" class="social-icon instagram" aria-label="Follow us on Instagram"><i
                class="fab fa-instagram"></i></a>
            <a href="#" class="social-icon whatsapp" aria-label="Follow us on WhatsApp"><i
                class="fab fa-whatsapp"></i></a>
            <a href="#" class="social-icon tiktok" aria-label="Follow us on TikTok"><i class="fab fa-tiktok"></i></a>
          </div>
        </div>
        <div class="col-lg-4 col-md-6 footer-column">
          <h5 class="footer-title">Quick Links</h5>
          <ul class="footer-links">
            <li><a href="#">Home</a></li>
            <li><a href="#">Listings</a></li>
            <li><a href="#">About</a></li>
            <li><a href="#">Contact</a></li>
          </ul>
        </div>
        <div class="col-lg-4 col-md-6 footer-column">
          <h5 class="footer-title">Contact Us</h5>
          <p class="footer-text"><i class="fas fa-phone me-1"></i> (123) 456-7890</p>
          <p class="footer-text"><i class="fas fa-envelope me-1"></i> info@Homefinder.com</p>
        </div>
      </div>
    </div>
  </footer>

  <div class="rights-reserved">
    <p class="mb-0">© 2025 HomeFinder. All Rights Reserved.</p>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- AOS JS -->
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init({
      duration: 600,
      once: true,
    });

    // Theme Toggle Functionality
    function toggleTheme() {
      const html = document.documentElement;
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      html.setAttribute('data-theme', newTheme);
      const toggleIcons = document.querySelectorAll('.theme-toggle i');
      toggleIcons.forEach(icon => {
        icon.className = newTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
      });
      localStorage.setItem('theme', newTheme);
    }

    // Apply saved theme on load
    document.addEventListener('DOMContentLoaded', () => {
      const savedTheme = localStorage.getItem('theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      const toggleIcons = document.querySelectorAll('.theme-toggle i');
      toggleIcons.forEach(icon => {
        icon.className = savedTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
      });

      const themeToggle = document.getElementById('themeToggle');
      const themeToggleMobile = document.getElementById('themeToggleMobile');
      if (themeToggle) themeToggle.addEventListener('click', toggleTheme);
      if (themeToggleMobile) themeToggleMobile.addEventListener('click', toggleTheme);
    });

    // Function to get URL parameter
    function getUrlParameter(name) {
      name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
      const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
      const results = regex.exec(location.search);
      return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    // Sample data with fallbacks
    async function fetchListingData(listingId) {
      const defaultData = {
        id: listingId,
        title: "Cozy Studio in Victoria Island",
        location: "Lagos, Nigeria",
        specs: "1 Bedroom • 1 Bathroom • 600 sq ft",
        rating: "4.8 (120 reviews)",
        host: {
          name: "John Doe",
          image: "https://placehold.co/64x64/d4af37/001f3f?text=Host&font=roboto",
          joined: "March 2018",
          reviews: "120 Reviews",
          responseRate: "100% response rate",
          responseTime: "Responds within an hour",
          bio: "Hi, I'm John! I'm passionate about sharing the beauty of Lagos with travelers. I've been hosting for over 5 years and love helping guests create memorable experiences. In my free time, I enjoy exploring local markets and trying new restaurants.",
          isSuperhost: true
        },
        description: "This cozy studio is perfect for singles or couples looking for a comfortable stay in Victoria Island. It features a queen-sized bed, a modern kitchen, and a spacious bathroom. Located in the heart of Lagos, you're close to top restaurants and entertainment.",
        amenities: [
          { name: "Wi-Fi", icon: "wifi" },
          { name: "Kitchen", icon: "utensils" },
          { name: "Parking", icon: "parking" },
          { name: "Air Conditioning", icon: "snowflake" }
        ],
        neighborhood: "Victoria Island is a vibrant area with easy access to beaches, shopping, and nightlife.",
        coordinates: { lat: 6.4291, lng: 3.4219 },
        reviews: [
          { name: "Emily R.", rating: "4.8", comment: "Amazing stay, very clean and cozy!", date: "June 2025" },
          { name: "Michael S.", rating: "4.9", comment: "Great location and friendly host.", date: "May 2025" }
        ],
        pricePerMonth: "$900/month",
        totalCost: "$900",
        images: [
          { url: "https://placehold.co/400x300/d4af37/001f3f?text=Living+Room&font=roboto", alt: "Living Room" },
          { url: "https://placehold.co/400x300/b8860b/001f3f?text=Bedroom&font=roboto", alt: "Bedroom" },
          { url: "https://placehold.co/400x300/d4af37/001f3f?text=Kitchen&font=roboto", alt: "Kitchen" },
          { url: "https://placehold.co/400x300/b8860b/001f3f?text=Bathroom&font=roboto", alt: "Bathroom" },
          { url: "https://placehold.co/400x300/d4af37/001f3f?text=View&font=roboto", alt: "View" }
        ]
      };
      return defaultData;
    }

    // Initialize Google Map
    function initMap() {
      const mapContainer = document.getElementById('map');
      if (!mapContainer) return;
      const coordinates = window.listingCoordinates || { lat: 6.4291, lng: 3.4219 };
      const map = new google.maps.Map(mapContainer, {
        zoom: 14,
        center: coordinates
      });
      new google.maps.Marker({
        position: coordinates,
        map: map,
        title: 'Property Location'
      });
      const viewOnGoogleMaps = document.getElementById('viewOnGoogleMaps');
      if (viewOnGoogleMaps) {
        viewOnGoogleMaps.href = `https://www.google.com/maps/search/?api=1&query=${coordinates.lat},${coordinates.lng}`;
      }
    }

    // Populate page with data
    async function populateListingPage() {
      const listingId = getUrlParameter('id');
      if (!listingId) {
        const listingPage = document.querySelector('.listing-page');
        if (listingPage) {
          listingPage.innerHTML = '<p>Listing not found.</p>';
        }
        return;
      }

      const data = await fetchListingData(listingId);

      window.listingCoordinates = data.coordinates || { lat: 6.4291, lng: 3.4219 };

      const setTextContent = (id, value) => {
        const element = document.getElementById(id);
        if (element) element.textContent = value || '';
      };

      const setInnerHTML = (id, value) => {
        const element = document.getElementById(id);
        if (element) element.innerHTML = value || '';
      };

      const setAttribute = (id, attr, value) => {
        const element = document.getElementById(id);
        if (element) element.setAttribute(attr, value || '');
      };

      setTextContent('listingTitle', data.title);
      setTextContent('listingLocation', data.location);
      setTextContent('listingSpecs', data.specs);
      setInnerHTML('listingRating', data.rating ? `<i class="fas fa-star"></i> ${data.rating}` : '');

      setAttribute('hostImage', 'src', data.host?.image);
      setTextContent('hostName', data.host?.name);
      setTextContent('hostJoined', data.host?.joined ? `Joined in ${data.host.joined}` : '');
      setTextContent('hostReviews', data.host?.reviews);
      setTextContent('hostResponseRate', data.host?.responseRate);
      setTextContent('hostResponseTime', data.host?.responseTime);
      setTextContent('hostBio', data.host?.bio);
      if (data.host?.isSuperhost) {
        const hostStatus = document.getElementById('hostStatus');
        if (hostStatus) hostStatus.classList.remove('d-none');
      }

      setTextContent('listingDescription', data.description);

      const amenitiesList = document.getElementById('amenitiesList');
      if (amenitiesList && data.amenities) {
        data.amenities.forEach(amenity => {
          const div = document.createElement('div');
          div.className = 'amenity-item';
          div.innerHTML = `<i class="fas fa-${amenity.icon}"></i> ${amenity.name}`;
          amenitiesList.appendChild(div);
        });
      }

      setTextContent('neighborhoodInfo', data.neighborhood);

      const reviewsList = document.getElementById('reviewsList');
      if (reviewsList && data.reviews) {
        data.reviews.forEach(review => {
          const div = document.createElement('div');
          div.className = 'review-card';
          div.innerHTML = `
            <h5>${review.name}</h5>
            <p><i class="fas fa-star"></i> ${review.rating} - ${review.date}</p>
            <p>${review.comment}</p>
          `;
          reviewsList.appendChild(div);
        });
      }

      setTextContent('pricePerMonth', data.pricePerMonth);
      setTextContent('totalCost', data.totalCost);

      // Populate image carousel (small screens)
      const carouselInner = document.getElementById('carouselInner');
      const carouselIndicators = document.getElementById('carouselIndicators');
      if (carouselInner && carouselIndicators && data.images) {
        const images = data.images.slice(0, 5);
        images.forEach((img, index) => {
          const div = document.createElement('div');
          div.className = `carousel-item ${index === 0 ? 'active' : ''}`;
          div.innerHTML = `<img src="${img.url}" class="d-block w-100" alt="${img.alt}" loading="lazy">`;
          carouselInner.appendChild(div);

          const button = document.createElement('button');
          button.type = 'button';
          button.setAttribute('data-bs-target', '#imageCarousel');
          button.setAttribute('data-bs-slide-to', index);
          if (index === 0) button.className = 'active';
          button.setAttribute('aria-label', `Slide ${index + 1}`);
          carouselIndicators.appendChild(button);
        });
      }

      const showMorePhotos = document.getElementById('showMorePhotos');
      if (showMorePhotos) {
        showMorePhotos.href = `/property/${listingId}/photos`;
      }

      const houseRules = document.getElementById('houseRules');
      if (houseRules && data.thingsToKnow?.houseRules) {
        data.thingsToKnow.houseRules.forEach(rule => {
          const li = document.createElement('li');
          li.innerHTML = `<i class="fas fa-check"></i> ${rule}`;
          houseRules.appendChild(li);
        });
      }

      const safetyInfo = document.getElementById('safetyInfo');
      if (safetyInfo && data.thingsToKnow?.safetyInfo) {
        data.thingsToKnow.safetyInfo.forEach(info => {
          const li = document.createElement('li');
          li.innerHTML = `<i class="fas fa-shield-alt"></i> ${info}`;
          safetyInfo.appendChild(li);
        });
      }

      const cancellationPolicy = document.getElementById('cancellationPolicy');
      if (cancellationPolicy && data.thingsToKnow?.cancellationPolicy) {
        data.thingsToKnow.cancellationPolicy.forEach(policy => {
          const li = document.createElement('li');
          li.innerHTML = `<i class="fas fa-info-circle"></i> ${policy}`;
          cancellationPolicy.appendChild(li);
        });
      }

      const showMoreBio = document.getElementById('showMoreBio');
      const hostBio = document.getElementById('hostBio');
      if (showMoreBio && hostBio && hostBio.scrollHeight > hostBio.clientHeight) {
        showMoreBio.addEventListener('click', (e) => {
          e.preventDefault();
          if (hostBio.classList.contains('expanded')) {
            hostBio.classList.remove('expanded');
            showMoreBio.textContent = 'Show more';
          } else {
            hostBio.classList.add('expanded');
            showMoreBio.textContent = 'Show less';
          }
        });
      } else if (showMoreBio) {
        showMoreBio.style.display = 'none';
      }

      const contactHost = document.getElementById('contactHost');
      if (contactHost) {
        contactHost.addEventListener('click', (e) => {
          e.preventDefault();
          alert('Contact host feature initiated.');
        });
      }

      const showMoreRules = document.getElementById('showMoreRules');
      if (showMoreRules) {
        showMoreRules.addEventListener('click', (e) => {
          e.preventDefault();
          alert('Show more house rules.');
        });
      }

      const showMoreSafety = document.getElementById('showMoreSafety');
      if (showMoreSafety) {
        showMoreSafety.addEventListener('click', (e) => {
          e.preventDefault();
          alert('Show more safety information.');
        });
      }

      const showMorePolicy = document.getElementById('showMorePolicy');
      if (showMorePolicy) {
        showMorePolicy.addEventListener('click', (e) => {
          e.preventDefault();
          alert('Show more cancellation policy.');
        });
      }

      const bookNow = document.getElementById('bookNow');
      if (bookNow) {
        bookNow.addEventListener('click', () => {
          alert('Booking initiated.');
        });
      }
    }

    // Search bar toggling
    document.addEventListener('DOMContentLoaded', () => {
      const searchButton = document.getElementById('search-button');
      const searchClose = document.getElementById('search-close');
      const offcanvas = document.getElementById('navbarOffcanvas');
      const searchCard = document.querySelector('.search-card');
      const navbarToggler = document.querySelector('.navbar-toggler');

      if (searchButton && searchClose && offcanvas && searchCard && navbarToggler) {
        searchButton.addEventListener('click', () => {
          const offcanvasInstance = bootstrap.Offcanvas.getInstance(offcanvas) || new bootstrap.Offcanvas(offcanvas);
          offcanvasInstance.hide();
          document.body.classList.remove('modal-open');
          document.body.style.overflow = '';
          document.body.style.paddingRight = '';
          navbarToggler.classList.remove('active');
          navbarToggler.setAttribute('aria-expanded', 'false');
          searchCard.classList.remove('d-none');
          const firstInput = searchCard.querySelector('input');
          if (firstInput) firstInput.focus();
        });

        searchClose.addEventListener('click', () => {
          searchCard.classList.add('d-none');
        });
      }

      populateListingPage();
    });
  </script>
</body>

</html>